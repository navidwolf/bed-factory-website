<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
        xmlns:xhtml="http://www.w3.org/1999/xhtml"
        xmlns:news="http://www.google.com/schemas/sitemap-news/0.9"
        xmlns:mobile="http://www.google.com/schemas/sitemap-mobile/1.0"
        xmlns:image="http://www.google.com/schemas/sitemap-image/1.1"
        xmlns:video="http://www.google.com/schemas/sitemap-video/1.1"
        xmlns:product="http://www.google.com/schemas/sitemap-product/1.1">

    {% for page in pages %}
    <url>
        <loc>{{ page.loc }}</loc>
        <changefreq>weekly</changefreq>
        <priority>0.8</priority>
    </url>
    {% endfor %}

    {% for product in products %}
    <url>
        <loc>{{ url_for('product_detail', product_id=product.id, _external=True) }}</loc>
        <changefreq>weekly</changefreq>
        <priority>1.0</priority>
        <image:image>
            <image:loc>{{ url_for('static', filename='images/' + product.image, _external=True) }}</image:loc>
            <image:caption>{{ product.name }}</image:caption>
        </image:image>
        <product:product>
            <product:name>{{ product.name }}</product:name>
            <product:description>{{ product.short_description if product.short_description else "تختی راحت و با کیفیت عالی برای خوابی آرام." }}</product:description>
            <product:price>{{ "{:.2f}".format(product.price) }} IRR</product:price>
            <product:availability>in stock</product:availability>
        </product:product>
    </url>
    {% endfor %}
</urlset>
