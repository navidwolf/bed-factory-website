{% extends "base.html" %}
{% block title %}{{ product.name }}{% endblock %}
{% block description %}{{ product.short_description or 'تختی راحت و با کیفیت عالی برای خوابی آرام.' }}{% endblock %}

{% block content %}
<div style="display:flex; justify-content:center; margin-top:40px;">
    <div style="max-width:600px; width:100%; text-align:center; border:1px solid #ccc; border-radius:10px; padding:20px; box-shadow:0 4px 8px rgba(0,0,0,0.1);">

        <div style="width:100%; height:300px; overflow:hidden; margin-bottom:20px;">
            <img src="{{ url_for('static', filename='images/' ~ product.image) }}" alt="{{ product.name }}" style="width:100%; height:100%; object-fit:cover; border-radius:10px;">
        </div>

        <h2 style="margin-bottom:10px;">{{ product.name }}</h2>

        {% if product.short_description %}
        <p style="font-style:italic; color:#555; margin-bottom:15px;">{{ product.short_description }}</p>
        {% else %}
        <p style="font-style:italic; color:#555; margin-bottom:15px;">تختی راحت و با کیفیت عالی برای خوابی آرام.</p>
        {% endif %}

        <p style="font-size:18px; margin-bottom:10px;"><strong>قیمت:</strong> {{ "{:,}".format(product.price) }} تومان</p>
        <div class="rating" style="margin-bottom:15px;">⭐ {{ product.rating }}</div>
        <p style="margin-bottom:20px; line-height:1.5;">{{ product.description }}</p>

        <a href="{{ url_for('add_to_cart', product_id=product.id) }}" class="btn" style="padding:10px 20px;">افزودن به سبد</a>
    </div>
</div>

<!-- Schema JSON-LD برای محصول -->
<script type="application/ld+json">
{
  "@context": "https://schema.org/",
  "@type": "Product",
  "name": "{{ product.name }}",
  "image": ["{{ url_for('static', filename='images/' ~ product.image, _external=True) }}"],
  "description": "{{ product.short_description or 'تختی راحت و با کیفیت عالی برای خوابی آرام.' }}",
  "sku": "P{{ product.id }}",
  "brand": {
    "@type": "Brand",
    "name": "Bed Factory"
  },
  "offers": {
    "@type": "Offer",
    "url": "{{ request.url }}",
    "priceCurrency": "IRR",
    "price": "{{ product.price }}",
    "availability": "https://schema.org/InStock"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "{{ product.rating }}",
    "reviewCount": "1"
  }
}
</script>
{% endblock %}
